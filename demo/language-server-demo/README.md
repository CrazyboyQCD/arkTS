# ArkTS Language Server Demo

è¿™æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯• ArkTS Language Server çš„æ¼”ç¤ºç¨‹åºï¼Œå¯ä»¥è¿›è¡Œé¡¹ç›®åˆå§‹åŒ–å’ŒçœŸå®çš„é€šä¿¡ï¼Œä»¥ä¾¿è§‚æµ‹å®ƒçš„è¡Œä¸ºæ˜¯å¦æ­£ç¡®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“¦ è‡ªåŠ¨åˆå§‹åŒ–æ¼”ç¤ºé¡¹ç›®
- ğŸ”Œ ä¸è¯­è¨€æœåŠ¡å™¨å»ºç«‹çœŸå®è¿æ¥
- ğŸ’¬ æ‰§è¡ŒåŸºæœ¬çš„ LSP é€šä¿¡æµ‹è¯•
- ğŸ“ æ—¥å¿—è®°å½•æ‰€æœ‰é€šä¿¡è¿‡ç¨‹
- âœ… éªŒè¯è¯­è¨€æœåŠ¡å™¨å“åº”

## å‰ç½®æ¡ä»¶

åœ¨è¿è¡Œæ­¤æ¼”ç¤ºä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. å·²ç»æ„å»ºäº†è¯­è¨€æœåŠ¡å™¨ï¼š
   ```bash
   cd /path/to/arkTS
   pnpm install
   pnpm -F "@arkts/language-server" build
   ```

2. å·²é…ç½® OpenHarmony SDK è·¯å¾„ï¼ˆå¯é€‰ï¼Œç”¨äºå®Œæ•´åŠŸèƒ½æµ‹è¯•ï¼‰

## å®‰è£…ä¾èµ–

```bash
cd demo/language-server-demo
npm install
```

## è¿è¡Œæ¼”ç¤º

```bash
npm start
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š

```bash
node client.js
```

## æ¼”ç¤ºå†…å®¹

æ­¤æ¼”ç¤ºå°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **é¡¹ç›®åˆå§‹åŒ–**
   - åˆ›å»ºç¤ºä¾‹ ArkTS é¡¹ç›®ç»“æ„
   - ç”Ÿæˆå¿…è¦çš„é…ç½®æ–‡ä»¶
   - åˆ›å»ºç¤ºä¾‹ `.ets` æ–‡ä»¶

2. **è¯­è¨€æœåŠ¡å™¨å¯åŠ¨**
   - å¯åŠ¨ ArkTS Language Server è¿›ç¨‹
   - å»ºç«‹ JSON-RPC é€šä¿¡é€šé“

3. **åˆå§‹åŒ–è¯·æ±‚**
   - å‘é€ `initialize` è¯·æ±‚
   - å‘é€ `ets/waitForEtsConfigurationChangedRequested` é…ç½®
   - å‘é€ `initialized` é€šçŸ¥

4. **åŠŸèƒ½æµ‹è¯•**
   - æ‰“å¼€æ–‡æ¡£æµ‹è¯•
   - ä»£ç è¡¥å…¨æµ‹è¯•
   - æ‚¬åœä¿¡æ¯æµ‹è¯•
   - è¯Šæ–­ä¿¡æ¯æµ‹è¯•

5. **å…³é—­è¿æ¥**
   - å‘é€ `shutdown` è¯·æ±‚
   - å‘é€ `exit` é€šçŸ¥

## é…ç½®

ä½ å¯ä»¥ä¿®æ”¹ `client.js` ä¸­çš„ä»¥ä¸‹é…ç½®ï¼š

```javascript
const config = {
  sdkPath: '/path/to/openharmony/sdk',  // OpenHarmony SDK è·¯å¾„
  tsdk: '/path/to/typescript/lib',       // TypeScript SDK è·¯å¾„
};
```

## è¾“å‡ºæ—¥å¿—

æ¼”ç¤ºç¨‹åºä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š

- ğŸš€ å¯åŠ¨ä¿¡æ¯
- ğŸ“¤ å‘é€çš„è¯·æ±‚
- ğŸ“¥ æ¥æ”¶çš„å“åº”
- âŒ é”™è¯¯ä¿¡æ¯
- âœ… æˆåŠŸä¿¡æ¯

## æ•…éšœæ’æŸ¥

### è¯­è¨€æœåŠ¡å™¨æœªå¯åŠ¨

ç¡®ä¿è¯­è¨€æœåŠ¡å™¨å·²ç»æ„å»ºï¼š
```bash
cd /path/to/arkTS
pnpm -F "@arkts/language-server" build
```

### SDK è·¯å¾„é”™è¯¯

å¦‚æœæ²¡æœ‰é…ç½® SDK è·¯å¾„ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚è¯·å‚è€ƒä¸»é¡¹ç›®æ–‡æ¡£é…ç½® OpenHarmony SDKã€‚

### ç«¯å£è¢«å ç”¨

å¦‚æœé‡åˆ°ç«¯å£å ç”¨é—®é¢˜ï¼Œå¯ä»¥ä¿®æ”¹ `client.js` ä¸­çš„ç«¯å£é…ç½®ã€‚

## å¼€å‘å’Œè°ƒè¯•

è¦å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œå¯ä»¥åœ¨å¯åŠ¨æ—¶æ·»åŠ è°ƒè¯•å‚æ•°ï¼š

```bash
node --inspect client.js
```

ç„¶åä½¿ç”¨ Chrome DevTools æˆ– VS Code è¿›è¡Œè°ƒè¯•ã€‚

## ç›¸å…³æ–‡æ¡£

- [Language Server Protocol è§„èŒƒ](https://microsoft.github.io/language-server-protocol/)
- [ArkTS å®˜æ–¹æ–‡æ¡£](https://developer.huawei.com/consumer/cn/arkts)
- [Volar æ¡†æ¶æ–‡æ¡£](https://volarjs.dev/)

## è®¸å¯è¯

MIT
